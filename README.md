# ReacrJS (26.05.2016)

## Иммутабельность
Как присваивать значения объекту?
Можно просто присваивать значение прямо в поле, это быстро, но теряется старое значение. Перед присваиванием можно полностью скопировать объект (н.р. дедовским parse+stringify) дальше работать с копией, так мы сохраним старое значение но сильно расходуем память. Недостаток для обоих в том, что накладно сравнивать объекты на эквивалентность/измененность.

Есть альтернативный метод, когда заменяется только изменившийся объект куда присваивали значение и все его родители (соседние объекты не меняются). При таком подходе, используя библиотеки, можно отслеживать все изменения и легко сравнивать объекты на равенство (быстро, а не перебором всего). Такой подход и называется Иммутабельностью

```js
// Псевдо код
var a = new ImmutableLib({
    name: 'Пушкин',
    childrens: [
        {name: 'Руслан'},
        {name: 'Людмила'}
    ]
})

var b = a.set('name', 'Александр')

a.name !== b.name // true Поле изменилось
a.childrens === b.childrens // true childrens, точнее ссылка на них скопировалась

var c = b.set(['childrens', 0], {name: 'Евгений'})

b.name === c.name // true
b.childrens !== c.childrens // true Ссыока на массив изменилась
b.childrens[0] !== c.childrens[0] // true Ссылка на нулевой элемент изменилась
b.childrens[1] === c.childrens[1] // true Ссылка на первый элемент осталась прежней

a.childrens[1] === c.childrens[1] // true Ссылка на первый элемент осталась прежней даже в сравнении с оригинальным объектом
```
    
Наиболее простое объяснение иммутабельности дано [тут](https://habrahabr.ru/company/devexpress/blog/302118/)

[![](https://habrastorage.org/files/398/28d/e28/39828de284eb4d2ea17d61755e5493da.png)](https://habrahabr.ru/company/devexpress/blog/302118/)
